<template>
  <require from="app/css-classes/behaviors/classes"></require>
  <require from="app/auth/behavior/login-status"></require>
  
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">
          <img src="/lib/images/pmlogo.png" class="pull-left" width="43" height="45" style="margin-top: -12px;">
          <span>${router.title}</span>
        </a>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li repeat.for="row of router.navigation" class="${row.isActive ? 'active' : ''}">
            <a show.bind="row.settings.isVisible" href.bind="row.href">${row.title}</a>
          </li>
        </ul>
        
        <login-status user.bind="auth.user" logout.delegate="auth.logout()"></login-status>

        <ul class="nav navbar-nav navbar-right" classes.bind="{'fade-hidden': !router.isNavigating}">
          <li class="loader" >
            <a><i class="fa fa-spinner fa-spin fa-2x"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="page-host container">
    <router-view></router-view>
  </div>
</template>